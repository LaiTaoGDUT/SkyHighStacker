# ğŸ® SkyHighStacker å¿«é€Ÿå‚è€ƒå¡ç‰‡

---

## ğŸ“– æ ¸å¿ƒæ–‡æ¡£å¿«é€Ÿé“¾æ¥

| æ–‡æ¡£ | ä½ç½® | ç”¨é€” |
|------|------|------|
| **é¡¹ç›®æ€»è§ˆ** | `README_é¡¹ç›®æ€»è§ˆ.md` | é¡¹ç›®æ•´ä½“ä»‹ç» â­ |
| **åœºæ™¯æ­å»ºæ€»æŒ‡å—** | `scenes/README_åœºæ™¯æ­å»ºæ€»æŒ‡å—.md` | åœºæ™¯æ­å»ºå…¥å£ â­ |
| **åœºæ™¯æ­å»ºæ¸…å•** | `scenes/å®Œæ•´åœºæ™¯æ­å»ºæ¸…å•.md` | è¯¦ç»†æ­¥éª¤æ¸…å• â­ |
| **UIå¸ƒå±€æŒ‡å—** | `scenes/UIå¸ƒå±€åˆ›å»ºæŒ‡å—.md` | UI åˆ›å»ºæ­¥éª¤ |
| **Blocké¢„åˆ¶ä½“æŒ‡å—** | `prefabs/Blocké¢„åˆ¶ä½“åˆ›å»ºæŒ‡å—.md` | é¢„åˆ¶ä½“åˆ›å»º |
| **èƒŒæ™¯èµ„æºæŒ‡å—** | `resources/èƒŒæ™¯èµ„æºå‡†å¤‡æŒ‡å—.md` | èµ„æºå‡†å¤‡ |
| **äº‹ä»¶ç³»ç»ŸæŒ‡å—** | `scripts/managers/äº‹ä»¶ç³»ç»Ÿä½¿ç”¨æŒ‡å—.md` | äº‹ä»¶ç³»ç»Ÿä½¿ç”¨ â­ |

---

## ğŸ¯ å¿«é€Ÿå¼€å§‹ï¼ˆ3 æ­¥ï¼‰

### 1ï¸âƒ£ é˜…è¯»æ–‡æ¡£ï¼ˆ15 åˆ†é’Ÿï¼‰
```
ğŸ“– README_é¡¹ç›®æ€»è§ˆ.md
ğŸ“– scenes/README_åœºæ™¯æ­å»ºæ€»æŒ‡å—.md
```

### 2ï¸âƒ£ åˆ›å»ºé¢„åˆ¶ä½“ï¼ˆ15 åˆ†é’Ÿï¼‰
```
ğŸ“– prefabs/Blocké¢„åˆ¶ä½“åˆ›å»ºæŒ‡å—.md
ğŸ¨ åœ¨ Cocos Creator ä¸­åˆ›å»º Block é¢„åˆ¶ä½“
```

### 3ï¸âƒ£ æ­å»ºåœºæ™¯ï¼ˆ60-90 åˆ†é’Ÿï¼‰
```
ğŸ“– scenes/å®Œæ•´åœºæ™¯æ­å»ºæ¸…å•.md
ğŸ¨ æŒ‰æ¸…å•é€æ­¥æ­å»ºåœºæ™¯
âœ… é€é¡¹å‹¾é€‰å®Œæˆ
```

---

## ğŸ—ï¸ åœºæ™¯ç»“æ„é€Ÿè§ˆ

```
Canvas
â”œâ”€â”€ Camera (+ CameraFollow)
â”œâ”€â”€ GameManager (+ GameManager)
â”œâ”€â”€ Background (+ BackgroundController)
â”‚   â”œâ”€â”€ GroundLayer
â”‚   â”œâ”€â”€ CityLayer
â”‚   â”œâ”€â”€ SkyLayer
â”‚   â””â”€â”€ SpaceLayer
â”œâ”€â”€ BlockContainer (+ BlockController)
â””â”€â”€ UI (+ GameUI)
    â”œâ”€â”€ TopBar (ScoreLabel, HeightLabel, PauseButton)
    â”œâ”€â”€ ComboNode
    â”œâ”€â”€ StartPanel
    â”œâ”€â”€ PausePanel
    â””â”€â”€ GameOverPanel
```

---

## âš¡ äº‹ä»¶ç³»ç»Ÿé€ŸæŸ¥

### å¯¼å…¥
```typescript
import { eventManager, GameEvent } from './managers/EventManager';
```

### ç›‘å¬äº‹ä»¶
```typescript
// åœ¨ onLoad ä¸­
eventManager.on(GameEvent.GAME_START, this.onGameStart, this);
```

### è§¦å‘äº‹ä»¶
```typescript
// æ— å‚æ•°
eventManager.emit(GameEvent.GAME_START);

// å¸¦å‚æ•°
eventManager.emit(GameEvent.SCORE_UPDATE, 100);
```

### å–æ¶ˆç›‘å¬
```typescript
// åœ¨ onDestroy ä¸­
eventManager.off(GameEvent.GAME_START, this.onGameStart);
```

### äº‹ä»¶ç±»å‹
```typescript
GameEvent.GAME_START      // æ¸¸æˆå¼€å§‹
GameEvent.GAME_PAUSE      // æ¸¸æˆæš‚åœ
GameEvent.GAME_RESUME     // æ¸¸æˆæ¢å¤
GameEvent.GAME_RESTART    // æ¸¸æˆé‡æ–°å¼€å§‹
GameEvent.GAME_OVER       // æ¸¸æˆç»“æŸ
GameEvent.SCORE_UPDATE    // åˆ†æ•°æ›´æ–°
GameEvent.HEIGHT_UPDATE   // é«˜åº¦æ›´æ–°
GameEvent.BLOCK_PERFECT   // å®Œç¾å¯¹é½
```

---

## ğŸ¨ å…³é”®é…ç½®å‚æ•°

### GameManager
```typescript
initialBlockSpeed: 100        // åˆå§‹é€Ÿåº¦
speedIncrement: 5            // é€Ÿåº¦å¢é‡
perfectAlignThreshold: 5     // å®Œç¾å¯¹é½é˜ˆå€¼
perfectAlignBonus: 50        // å®Œç¾å¥–åŠ±
normalAlignScore: 10         // æ™®é€šåˆ†æ•°
```

### BlockController
```typescript
blockWidth: 200              // å®½åº¦
blockHeight: 50             // é«˜åº¦
moveRange: 300              // ç§»åŠ¨èŒƒå›´
defaultSpeed: 100           // é»˜è®¤é€Ÿåº¦
```

### BackgroundController
```typescript
groundThreshold: 0          // åœ°é¢å±‚
cityThreshold: 500         // åŸå¸‚å±‚
skyThreshold: 1500         // å¤©ç©ºå±‚
spaceThreshold: 3000       // å¤ªç©ºå±‚
```

### CameraFollow
```typescript
followSpeed: 5              // è·Ÿéšé€Ÿåº¦
smoothTime: 0.3            // å¹³æ»‘æ—¶é—´
offsetY: 200               // Yè½´åç§»
```

---

## ğŸ¨ UI é¢œè‰²æ–¹æ¡ˆ

### æŒ‰é’®
- å¼€å§‹æŒ‰é’®: `#4CAF50` (ç»¿è‰²)
- ç»§ç»­æŒ‰é’®: `#2196F3` (è“è‰²)
- é‡æ–°å¼€å§‹: `#FF9800` (æ©™è‰²)
- æš‚åœæŒ‰é’®: `#666666` (ç°è‰²)

### æ–‡å­—
- æ™®é€šæ–‡å­—: `#FFFFFF` (ç™½è‰²)
- é«˜åˆ†æ–‡å­—: `#FFC107` (é»„è‰²)
- è¿å‡»æ–‡å­—: `#FFD700` (é‡‘è‰²)
- ç»“æŸæ ‡é¢˜: `#F44336` (çº¢è‰²)

### èƒŒæ™¯ï¼ˆçº¯è‰²å ä½ï¼‰
- åœ°é¢: `#87CEEB`
- åŸå¸‚: `#5A9FD4`
- å¤©ç©º: `#3B82F6`
- å¤ªç©º: `#1E1B4B`

---

## ğŸ“ Canvas é…ç½®

```typescript
UITransform:
  Width: 720
  Height: 1200

Canvas:
  Align Canvas With Screen: âœ“

Widget:
  Top: âœ“, Bottom: âœ“, Left: âœ“, Right: âœ“
  All offsets: 0
```

---

## ğŸ“ Camera é…ç½®

```typescript
Camera:
  Projection: Ortho
  Ortho Height: 600
  Near: 1
  Far: 2000
  Clear Flags: Solid Color
  Background Color: #334C78

CameraFollow:
  Follow Speed: 5
  Smooth Time: 0.3
  Offset Y: 200
  Min Height: 0
  Max Height: 10000
```

---

## ğŸ¯ æ ¸å¿ƒæ–¹æ³•é€ŸæŸ¥

### GameManager
```typescript
startGame()          // å¼€å§‹æ¸¸æˆ
pauseGame()          // æš‚åœæ¸¸æˆ
resumeGame()         // æ¢å¤æ¸¸æˆ
restartGame()        // é‡æ–°å¼€å§‹
gameOver()           // æ¸¸æˆç»“æŸ
```

### GameUI
```typescript
updateScore(score)       // æ›´æ–°åˆ†æ•°
updateHeight(height)     // æ›´æ–°é«˜åº¦
updateCombo(combo)       // æ›´æ–°è¿å‡»
showGameOver()           // æ˜¾ç¤ºç»“æŸç•Œé¢
showStartPanel()         // æ˜¾ç¤ºå¼€å§‹ç•Œé¢
```

### BlockController
```typescript
spawnBlock()            // ç”Ÿæˆå»ºç­‘å—
stopCurrentBlock()      // åœæ­¢å½“å‰å—
calculateOverlap()      // è®¡ç®—é‡å 
trimBlock()            // è£å‰ªå»ºç­‘å—
```

### Block
```typescript
initialize()           // åˆå§‹åŒ–
stopMoving()          // åœæ­¢ç§»åŠ¨
fix()                 // å›ºå®š
adjustWidth()         // è°ƒæ•´å®½åº¦
```

---

## ğŸ› è°ƒè¯•æŠ€å·§

### 1. æŸ¥çœ‹æ—¥å¿—
```typescript
console.log('[æ¨¡å—å] ä¿¡æ¯', { æ•°æ® });
```

### 2. æ£€æŸ¥å¼•ç”¨
```typescript
console.log('GameManager:', GameManager.instance);
console.log('EventManager:', eventManager);
```

### 3. æŸ¥çœ‹äº‹ä»¶ç›‘å¬å™¨
```typescript
console.log(eventManager.getListenerCount(GameEvent.GAME_START));
```

### 4. Chrome DevTools
æŒ‰ `F12` æ‰“å¼€å¼€å‘è€…å·¥å…·

---

## âœ… æ­å»ºæ£€æŸ¥æ¸…å•

### èŠ‚ç‚¹ç»“æ„
- [ ] æ‰€æœ‰èŠ‚ç‚¹å·²åˆ›å»º
- [ ] èŠ‚ç‚¹å‘½åæ­£ç¡®
- [ ] å±‚çº§ç»“æ„æ­£ç¡®

### ç»„ä»¶é…ç½®
- [ ] æ‰€æœ‰ç»„ä»¶å·²æ·»åŠ 
- [ ] å‚æ•°é…ç½®æ­£ç¡®

### å¼•ç”¨å…³è”
- [ ] GameManager å¼•ç”¨å·²å…³è”
- [ ] GameUI å¼•ç”¨å·²å…³è”
- [ ] BackgroundController å¼•ç”¨å·²å…³è”
- [ ] BlockController å¼•ç”¨å·²å…³è”

### åˆå§‹çŠ¶æ€
- [ ] StartPanel æ˜¾ç¤º
- [ ] PausePanel éšè—
- [ ] GameOverPanel éšè—
- [ ] ComboNode éšè—
- [ ] GroundLayer æ˜¾ç¤º
- [ ] å…¶ä»–èƒŒæ™¯å±‚éšè—

### è¿è¡Œæµ‹è¯•
- [ ] åœºæ™¯å¯ä»¥è¿è¡Œ
- [ ] æ— æ§åˆ¶å°é”™è¯¯
- [ ] UI æ­£å¸¸æ˜¾ç¤º

---

## ğŸš€ ä¸‹ä¸€æ­¥å·¥ä½œ

### ç«‹å³è¦åš
1. âœ… åœ¨ç¼–è¾‘å™¨ä¸­æ­å»ºåœºæ™¯
2. â­ï¸ å®ç°å»ºç­‘å—ç”Ÿæˆ
3. â­ï¸ å®ç°å»ºç­‘å—æ”¾ç½®
4. â­ï¸ å®ç°åˆ†æ•°è®¡ç®—
5. â­ï¸ å®ç°æ‘„åƒæœºè·Ÿéš

### çŸ­æœŸç›®æ ‡
- æ ¸å¿ƒç©æ³•å¯ç©
- åŸºç¡€ UI äº¤äº’
- æ‘„åƒæœºè·Ÿéš
- èƒŒæ™¯åˆ‡æ¢

### ä¸­æœŸç›®æ ‡
- è§†è§‰æ•ˆæœ
- éŸ³æ•ˆéŸ³ä¹
- åŠ¨ç”»æ•ˆæœ

### é•¿æœŸç›®æ ‡
- æ•°æ®æŒä¹…åŒ–
- æ€§èƒ½ä¼˜åŒ–
- æˆå°±ç³»ç»Ÿ

---

## ğŸ“ è·å–å¸®åŠ©

### é‡åˆ°é—®é¢˜ï¼Ÿ
1. ğŸ“– æŸ¥çœ‹ç›¸å…³æ–‡æ¡£
2. ğŸ” æ£€æŸ¥æ§åˆ¶å°é”™è¯¯
3. âœ… å¯¹ç…§æ¸…å•æ£€æŸ¥
4. ğŸ“š æŸ¥çœ‹ Cocos Creator å®˜æ–¹æ–‡æ¡£

### å¸¸è§é—®é¢˜
- åœºæ™¯è¿è¡ŒæŠ¥é”™ â†’ æ£€æŸ¥ç»„ä»¶å¼•ç”¨
- UI æ˜¾ç¤ºä¸æ­£å¸¸ â†’ æ£€æŸ¥ Widget è®¾ç½®
- ç‚¹å‡»æ— ååº” â†’ æ£€æŸ¥ Button Target
- å»ºç­‘å—æ— æ³•ç”Ÿæˆ â†’ æ£€æŸ¥é¢„åˆ¶ä½“å¼•ç”¨

---

## ğŸ’¡ æœ€ä½³å®è·µ

### ä»£ç è§„èŒƒ
- ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼
- éµå¾ªå‘½åè§„èŒƒ
- æ·»åŠ å¿…è¦æ³¨é‡Š
- ä¿æŒä»£ç æ•´æ´

### å¼€å‘æµç¨‹
- å¢é‡å¼€å‘
- é¢‘ç¹æµ‹è¯•
- åŠæ—¶é‡æ„
- å‚è€ƒæ–‡æ¡£

### äº‹ä»¶ç³»ç»Ÿ
- è®°å¾—å–æ¶ˆç›‘å¬
- ä¼ å…¥ this ä¸Šä¸‹æ–‡
- é¿å…äº‹ä»¶å¾ªç¯
- ä½¿ç”¨æšä¸¾ç±»å‹

---

## ğŸ‰ å®Œæˆæ ‡å¿—

å½“ä½ å®Œæˆä»¥ä¸‹æ‰€æœ‰é¡¹ï¼Œå°±å¯ä»¥è¿›å…¥ä¸‹ä¸€é˜¶æ®µäº†ï¼š

- âœ… æ‰€æœ‰æ–‡æ¡£å·²é˜…è¯»
- âœ… Block é¢„åˆ¶ä½“å·²åˆ›å»º
- âœ… åœºæ™¯å·²å®Œæ•´æ­å»º
- âœ… æ‰€æœ‰å¼•ç”¨å·²å…³è”
- âœ… åœºæ™¯å¯ä»¥æ­£å¸¸è¿è¡Œ
- âœ… æ— æ§åˆ¶å°é”™è¯¯
- âœ… UI æ­£å¸¸æ˜¾ç¤º

---

**ä¿å­˜æ­¤æ–‡æ¡£ï¼Œéšæ—¶æŸ¥é˜…ï¼** ğŸ“Œ

