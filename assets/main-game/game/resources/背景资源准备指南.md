# 背景资源准备指南

本指南说明游戏所需的背景图片资源及其规格要求。

---

## 背景图片概述

游戏需要 **4 张** 背景图片，对应不同的高度阶段：

1. **地面层 (Ground)** - 0-500m
2. **城市层 (City)** - 500-1500m
3. **天空层 (Sky)** - 1500-3000m
4. **太空层 (Space)** - 3000m+

---

## 图片规格要求

### 尺寸规格
- **推荐尺寸**: `720 x 1200` 像素（竖屏）
- **最小尺寸**: `720 x 1200` 像素
- **最大尺寸**: `1440 x 2400` 像素（高清版本）

### 格式要求
- **格式**: PNG 或 JPG
- **建议**: PNG 格式（支持透明度，画质更好）
- **文件大小**: 单张不超过 2MB（建议压缩优化）

### 颜色要求
- **色彩模式**: RGB
- **位深度**: 24位（无透明）或 32位（带透明通道）

---

## 各背景层设计建议

### 1. 地面层 (Ground)
**高度范围**: 0-500m

**设计要素**：
- 🏠 地面建筑物、街道
- 🌳 树木、绿化
- 🚗 车辆、人行道
- 💡 路灯、标志牌
- 📦 细节：窗户、门、装饰

**颜色基调**：
- 主色：暖色调（棕色、绿色、灰色）
- 天空部分：浅蓝色或黄昏色

**参考图片**：
- 城市街景、商业区
- 现代建筑群低层视角

**示例色彩**：
```
地面: #8B7355 (棕色)
建筑: #A9A9A9 (灰色)
植物: #2E8B57 (绿色)
天空: #87CEEB (天蓝色)
```

---

### 2. 城市层 (City)
**高度范围**: 500-1500m

**设计要素**：
- 🏢 高层建筑群
- 🌆 城市天际线
- ☁️ 低空云层
- 🪟 建筑窗户灯光
- ✈️ 可选：飞机、飞鸟

**颜色基调**：
- 主色：冷色调（蓝色、灰蓝色）
- 建筑剪影效果
- 云层：白色、浅灰色

**参考图片**：
- 城市高空俯瞰
- 摩天大楼群
- 云层穿梭视角

**示例色彩**：
```
建筑: #4A5568 (深灰蓝)
天空: #5A9FD4 (中蓝)
云层: #E0E7EF (浅灰白)
灯光: #FFD700 (金黄)
```

---

### 3. 天空层 (Sky)
**高度范围**: 1500-3000m

**设计要素**：
- ☁️ 大片云海
- 🌤️ 阳光穿透云层
- 🌈 可选：彩虹、光晕
- ⭐ 稀疏星星（高空）
- 🎈 可选：热气球、卫星

**颜色基调**：
- 主色：渐变蓝色（上深下浅）
- 云层丰富、层次分明
- 光线效果

**参考图片**：
- 高空云海
- 日出/日落天空
- 飞机视角的云层

**示例色彩**：
```
深空: #1E3A8A (深蓝)
中空: #3B82F6 (亮蓝)
云层: #FFFFFF (纯白)
光晕: #FDB462 (橙黄)
```

---

### 4. 太空层 (Space)
**高度范围**: 3000m+

**设计要素**：
- 🌌 星空、银河
- 🪐 远处行星、月球
- ⭐ 密集星星
- 🌠 流星、彗星
- 🛸 可选：卫星、空间站

**颜色基调**：
- 主色：深色太空（深蓝、黑色、紫色）
- 星星：白色、黄色、蓝色
- 星云：紫色、粉色

**参考图片**：
- 太空照片、星云
- 科幻太空场景
- 地球外太空视角

**示例色彩**：
```
深空: #0F172A (深蓝黑)
星云: #8B5CF6 (紫色)
星星: #FBBF24 (金黄)
行星: #38BDF8 (亮蓝)
```

---

## 资源获取方式

### 方式 1：使用 AI 生成图片
使用 AI 工具生成背景图片（推荐）：

**工具推荐**：
- Midjourney
- DALL·E 3
- Stable Diffusion

**提示词示例**：

**地面层**：
```
City street view from ground level, modern buildings, 
trees, cars, people, warm colors, daytime, 
vertical composition 720x1200, mobile game background
```

**城市层**：
```
City skyline from high altitude, skyscrapers, 
low clouds, blue tone, urban landscape, 
vertical composition 720x1200, mobile game background
```

**天空层**：
```
Sky and clouds at high altitude, blue gradient sky, 
fluffy white clouds, sunlight, peaceful atmosphere,
vertical composition 720x1200, mobile game background
```

**太空层**：
```
Outer space view, stars, galaxy, distant planets, 
dark blue and purple nebula, cosmic scene,
vertical composition 720x1200, mobile game background
```

### 方式 2：购买或下载素材

**免费素材网站**：
- Unsplash (unsplash.com)
- Pexels (pexels.com)
- Pixabay (pixabay.com)

**付费素材网站**：
- Shutterstock
- Adobe Stock
- iStock

**搜索关键词**：
- "city skyline vertical"
- "sky clouds vertical"
- "space stars vertical"
- "urban street view"

### 方式 3：自己绘制

使用设计工具：
- Photoshop
- Illustrator
- Procreate (iPad)
- Krita (免费)

---

## 导入资源到 Cocos Creator

### 步骤 1：准备文件

1. 将 4 张背景图片命名为：
   - `bg_ground.png`
   - `bg_city.png`
   - `bg_sky.png`
   - `bg_space.png`

2. 如果图片过大，进行压缩：
   - 使用 TinyPNG (tinypng.com) 在线压缩
   - 或使用 Photoshop "存储为Web所用格式"

### 步骤 2：导入到项目

1. 在 Cocos Creator 中，打开 `assets/main-game/game/resources/` 目录
2. 创建子目录 `backgrounds/`
3. 将 4 张图片拖拽到 `backgrounds/` 目录中
4. 等待资源导入完成

### 步骤 3：配置图片属性

选中每张图片，在属性面板中设置：

**Texture 设置**：
- **Type**: Sprite Frame (默认)
- **Filter Mode**: BILINEAR
- **Wrap Mode U**: CLAMP
- **Wrap Mode V**: CLAMP

**PackAble** (可选):
- 如果希望自动打包图集，勾选
- 如果图片较大，取消勾选

---

## 在场景中使用背景

### 方法 1：在编辑器中手动设置

1. 打开 MainGame 场景
2. 选中背景层节点（如 `GroundLayer`）
3. 在 Sprite 组件的 **SpriteFrame** 属性中：
   - 点击右侧的"..."按钮
   - 选择对应的背景图片
   - 点击确定

重复以上步骤为每个背景层设置对应的图片。

### 方法 2：通过代码动态加载

在 `BackgroundController.ts` 中添加资源加载逻辑：

```typescript
protected onLoad(): void {
    // ... 现有代码 ...
    this.loadBackgroundTextures();
}

private loadBackgroundTextures(): void {
    const backgrounds = [
        { layer: this.groundLayer, path: 'backgrounds/bg_ground' },
        { layer: this.cityLayer, path: 'backgrounds/bg_city' },
        { layer: this.skyLayer, path: 'backgrounds/bg_sky' },
        { layer: this.spaceLayer, path: 'backgrounds/bg_space' }
    ];

    backgrounds.forEach(({ layer, path }) => {
        if (!layer) return;
        
        resources.load(path, SpriteFrame, (err, spriteFrame) => {
            if (err) {
                console.error(`[BackgroundController] 加载背景失败: ${path}`, err);
                return;
            }
            
            const sprite = layer.getComponent(Sprite);
            if (sprite) {
                sprite.spriteFrame = spriteFrame;
            }
        });
    });
}
```

---

## 临时替代方案

如果暂时没有准备好美术资源，可以使用纯色背景作为占位符：

### 纯色背景方案

在场景编辑器中：

1. **GroundLayer**: 浅蓝色 `#87CEEB`
2. **CityLayer**: 中蓝色 `#5A9FD4`
3. **SkyLayer**: 深蓝色 `#3B82F6`
4. **SpaceLayer**: 深紫黑 `#1E1B4B`

只需设置 Sprite 组件的 **Color** 属性，不需要 SpriteFrame。

---

## 性能优化建议

### 1. 图片压缩
- 使用 PNG-8 格式（如果颜色较少）
- 使用 TinyPNG 等工具压缩

### 2. 分辨率适配
- 准备 @2x 和 @1x 两套资源
- 根据设备性能自动选择

### 3. 动态加载
- 不要一次性加载所有背景
- 根据需要动态加载和释放

### 4. 使用图集
- 如果背景图片较小，可以打包到图集
- 如果图片很大，单独存放

---

## 测试背景

导入背景后，在场景中测试：

1. ✅ 图片显示清晰，无失真
2. ✅ 尺寸合适，铺满屏幕
3. ✅ 颜色过渡自然
4. ✅ 加载速度快
5. ✅ 不同层级切换流畅

---

## 进阶：视差滚动效果

如果想实现更丰富的视差效果，可以将每个背景层分为多个子层：

```
Background
├── GroundLayer
│   ├── GroundFar (远景)
│   ├── GroundMid (中景)
│   └── GroundNear (近景)
├── CityLayer
│   ├── CityFar
│   └── CityNear
...
```

每个子层使用不同的视差速度，创造景深效果。

---

## 下一步

准备好背景资源后：
1. 在场景中设置背景层
2. 配置 BackgroundController 组件
3. 测试背景切换效果
4. 调整视差滚动参数

---

## 常见问题

### Q: 背景图片模糊？
A: 检查图片分辨率是否足够高，Filter Mode 设置为 BILINEAR。

### Q: 背景图片拉伸变形？
A: 确保图片尺寸比例为 720:1200 (3:5)。

### Q: 背景切换时卡顿？
A: 预加载背景资源，避免运行时加载。

### Q: 背景文件太大？
A: 使用图片压缩工具，或降低图片质量。

